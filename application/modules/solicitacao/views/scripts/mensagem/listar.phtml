<div class="table-responsive mensagens">
    <?php if (count($this->arrResult) > 0) : ?>
        <table class="table table-bordered" style="width: 100%">
            <thead class=" green darken-1 white-text">
            <tr>
                <th data-field="" class="messagem-numero left-align">Nº</th>
                <th data-field="" class="messagem-titulo left-align">Título</th>
<!--                <th data-field="" class="left-align">Proponente</th>-->
                <th data-field="" class="mensagem-texto left-align">Solicita&ccedil;&atilde;o</th>
                <?php if (!$this->ehProponente)  : ?>
                    <th data-field="" class="left-align">T&eacute;cnico</th>
                <?php endif; ?>
                <th data-field="" class="mensagem-situacao left-align">Situa&ccedil;&atilde;o</th>
                <th data-field="id" class="mensagem-data center-align">Data</th>
            </tr>
            </thead>
            <tbody>
            <?php foreach ($this->arrResult as $int => $arrValue): ?>

                <?php
                $arrayUrl = ['module' => 'solicitacao', 'controller' => 'mensagem', 'action' => 'visualizar', 'id' => $arrValue['idSolicitacao']];

                if (!empty($arrValue['idPronac'])) {
                    $arrayUrl['idPronac'] = $arrValue['idPronac'];
                } elseif (!empty($arrValue['idProjeto'])) {
                    $arrayUrl['idPreProjeto'] = $arrValue['idProjeto'];
                }

                if ($arrValue['siEncaminhamento'] == 12) {
                    $arrayUrl['action'] = 'solicitar';
                    unset($arrayUrl['id']);
                }

                if ($arrValue['idTecnico'] == $this->idUsuario) {
                    $arrayUrl['action'] = 'responder';
                }
                ?>
                <tr class="<?= ($arrValue['stLeitura'] == 0 && !empty($arrValue['dtResposta'])) ? 'unread' : 'read'; ?>">
                    <td>
                        <a href="<?php echo $this->url($arrayUrl, null, true); ?>">
                            <?php if (!empty($arrValue['Pronac'])) {
                                echo $arrValue['Pronac'];
                            } elseif ($arrValue['idProjeto']) {
                                echo $arrValue['idProjeto'];
                            } ?>
                        </a>
                    </td>
                    <td>
                        <a href="<?php echo $this->url($arrayUrl, null, true); ?>">
                            <?= $arrValue['NomeProjeto']; ?>
                        </a>
                    </td>
<!--                    <td>-->
<!--                        <a href="--><?php //echo $this->url($arrayUrl, null, true); ?><!--">-->
<!--                            --><?//= $arrValue['Solicitante']; ?>
<!--                        </a>-->
<!--                    </td>-->
                    <td>
                        <a href="<?php echo $this->url($arrayUrl, null, true); ?>">
                            <?= $arrValue['dsSolicitacao']; ?>
                        </a>
                    </td>
                    <?php if (!$this->ehProponente) : ?>
                        <td>
                            <a href="<?php echo $this->url($arrayUrl, null, true); ?>">
                                <?= $arrValue['Tecnico']; ?>
                            </a>
                        </td>
                    <?php endif; ?>
                    <td>
                        <a href="<?php echo $this->url($arrayUrl, null, true); ?>">
                            <?= $arrValue['dsEncaminhamento']; ?>
                        </a>
                    </td>
                    <td class="center-align"><?= date('d/m/Y', strtotime($arrValue['dtSolicitacao'])); ?></td>
                </tr>
            <?php endforeach; ?>
            </tbody>
        </table>
    <?php else: ?>
        <div class="padding20 green white-text">Sem solicita&ccedil;&otilde;es.</div>
    <?php endif; ?>
</div>
