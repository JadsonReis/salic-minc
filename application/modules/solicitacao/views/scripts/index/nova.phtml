<div class="container-fluid">
    <div class="page-title">
        <div class="row">
            <div class="col s12 m12 l12">
                <h5>Solicita&ccedil;&atilde;o Proponente</h5>
                <div class="card padding20 materialize" >
                    <form id="form-mensagem" method="post" action="<?php echo $this->urlAction ?>" enctype="multipart/form-data">
                        <input name="idSolicitacao" type="hidden" value="<?= isset($this->dataForm['idSolicitacao']) ? $this->dataForm['idSolicitacao']: ''; ?>"/>
                        <input name="idPronac" type="hidden" value="<?= $this->dataForm['idPronac']; ?>"/>
                        <input name="idProjeto" type="hidden" value="<?= $this->dataForm['idProjeto']; ?>"/>
                        <input name="siEncaminhamento" type="hidden" value="<?= $this->dataForm['siEncaminhamento']; ?>"/>

                        <?php if(!isset($this->arrConfig['dsMensagem']['show']) || $this->arrConfig['dsMensagem']['show'] === true): ?>
                            <?php if (isset($this->arrConfig['dsMensagem']['disabled']) && $this->arrConfig['dsMensagem']['disabled']): ?>
                                <div class="row">
                                    <div class="input-field col s12">
                                        <h4 for="dsMensagem" class="active">Solicita&ccedil;&atilde;o</h4>
                                    </div>
                                    <div class="col s12">
                                        <?= isset($this->dataForm['dsSolicitacao']) ? $this->dataForm['dsSolicitacao']: ''; ?>
                                    </div>
                                </div>
                            <?php else: ?>
                                <div class="row">
                                    <div class="input-field col s12">
                                        <h6 for="dsMensagem" class="active">Solicita&ccedil;&atilde;o</h6>
                                        <br />
                                        <textarea id="dsMensagem" class="materialize-textarea editor" name="dsMensagem" <?php if (isset($this->arrConfig['dsMensagem']) && $this->arrConfig['dsMensagem']['disabled']) echo 'disabled="disabled"' ?>><?php if (isset($this->dataForm['dsMensagem'])) echo $this->dataForm['dsMensagem']; ?>  </textarea>
                                        <br />
                                    </div>

                                    <?php if (!empty($this->arquivoExecucaoImediata[0])) : ?>
                                        <?php
                                        $currentUrl = Zend_Controller_Front::getInstance()->getRequest()->getRequestUri();
                                        ?>
                                        <div id="comprovanteDocumentoAnexado"
                                             class="doc<?php echo $this->arquivoExecucaoImediata[0]['codigodocumento']; ?>">
                                            <label for="arquivo"
                                                   style="width: 50px; "><?php echo $this->arquivoExecucaoImediata[0]['descricao']; ?> </label>
                                            <a href="<?= $this->url(array('module' => 'default', 'controller' => 'upload', 'action' => 'abrir')); ?>?id=<?= $this->arquivoExecucaoImediata[0]['iddocumentospreprojetos']; ?>">
                                                <?= utf8_decode(htmlentities($this->arquivoExecucaoImediata[0]['noarquivo'])); ?>
                                            </a>
                                        </div>
                                    <?php else : ?>
                                        <div id="anexarDocumento">
                                            <label for="arquivo" style="width: 50px; ">Anexar arquivo: </label>
                                            <input type="file" name="arquivo" id="arquivo" class="input_simples">
                                            <div id="arquivoinvalido" style="color:#FF0000"></div>
                                        </div>
                                    <?php endif; ?>
                                </div>
                            <?php endif; ?>
                        <?php endif; ?>
                        <?php if(!isset($this->arrConfig['dsMensagem']['show']) || $this->arrConfig['dsMensagem']['show'] === true): ?>
                            <?php if (isset($this->arrConfig['dsResposta']) && $this->arrConfig['dsResposta']['disabled']): ?>
                                <div class="row">
                                    <div class="input-field col s12">
                                        <label for="dsResposta" class="active">Resposta</label>
                                    </div>
                                    <div class="col s12">
                                        <?= ($this->dataForm['dsResposta'])? $this->dataForm['dsResposta'] : '<br />Sem resposta at&eacute; o momento.'; ?>
                                    </div>
                                </div>
                            <?php elseif (isset($this->dataForm['dsResposta'])): ?>
                                <div class="row">
                                    <div class="input-field col s12">
                                        <br />
                                        <textarea id="dsResposta" class="materialize-textarea editor" name="dsResposta" <?php if (isset($this->arrConfig['dsResposta']) && $this->arrConfig['dsResposta']['disabled']) echo 'disabled="disabled"' ?>><?php if (isset($this->dataForm['dsResposta'])) echo $this->dataForm['dsResposta']; ?>  </textarea>
                                        <br />
                                        <label for="dsResposta" class="active">Resposta</label>
                                        <br />
                                    </div>
                                </div>
                            <?php endif; ?>
                        <?php endif; ?>

                        <?php if(!isset($this->arrConfig['actions']['show']) || $this->arrConfig['actions']['show'] === true): ?>
                            <div class="row">
                                <div class="col s12 center-align">
                                    <a class="btn waves-effect waves-light bt_rascunho">Rascunho</a>
                                    <button class="btn waves-effect waves-light" type="submit" name="action">Enviar</button>
                                    <a href="javascript:$3.redirect('<?php echo $this->url(array('module' => 'solicitacao', 'controller' => 'index', 'action' => $this->strActionBack, 'idPronac' => $this->idPronac), null, true); ?>')"
                                       class="modal-action modal-close waves-effect waves-orange orange-text btn-flat">Cancelar</a>
                                </div>
                            </div>
                        <?php endif; ?>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function ($) {
        $("textarea.editor").each(function(){
            $(this).editorRico({altura: 200});
        });
    });
</script>